<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kokteyl Gecesi ‚Äî Oyunu Sen Belirle</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-deep: #08080d;
    --bg-card: #111118;
    --bg-card-hover: #18181f;
    --gold: #c9a84c;
    --gold-light: #e8d48b;
    --gold-dim: #7a6830;
    --cream: #f0ebe0;
    --cream-dim: #8a8275;
    --wine: #7a2038;
    --selected-glow: rgba(201, 168, 76, 0.12);
    --border-subtle: rgba(201, 168, 76, 0.06);
    --border-hover: rgba(201, 168, 76, 0.18);
    --border-selected: rgba(201, 168, 76, 0.45);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    background: var(--bg-deep);
    color: var(--cream);
    font-family: 'Outfit', sans-serif;
    font-weight: 300;
    min-height: 100vh;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  body::after {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.035'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 100;
  }

  .ambient { position: fixed; border-radius: 50%; filter: blur(160px); pointer-events: none; z-index: 0; }
  .amb-1 { width: 500px; height: 500px; top: -180px; left: -120px; background: var(--gold); opacity: 0.04; }
  .amb-2 { width: 400px; height: 400px; bottom: -150px; right: -80px; background: var(--wine); opacity: 0.06; }

  .page { position: relative; z-index: 1; max-width: 480px; margin: 0 auto; padding: 48px 20px 80px; }

  /* LOGIN */
  .login-screen {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .login-box { width: 100%; max-width: 380px; text-align: center; animation: fadeIn 1s ease; }
  .login-icon { font-size: 48px; margin-bottom: 20px; display: block; }
  .login-box h1 { font-family: 'Playfair Display', serif; font-size: 28px; color: var(--gold); font-weight: 700; margin-bottom: 8px; }
  .login-box .subtitle { font-size: 14px; color: var(--cream-dim); margin-bottom: 36px; line-height: 1.5; }

  .password-input {
    width: 100%;
    padding: 16px 20px;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    color: var(--cream);
    font-family: 'Outfit', sans-serif;
    font-size: 18px;
    font-weight: 500;
    letter-spacing: 6px;
    text-align: center;
    text-transform: uppercase;
    outline: none;
    transition: border-color 0.3s;
    margin-bottom: 16px;
  }
  .password-input::placeholder { letter-spacing: 2px; font-size: 14px; color: var(--cream-dim); opacity: 0.5; }
  .password-input:focus { border-color: var(--gold-dim); }

  .login-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, var(--gold-dim), var(--gold));
    border: none;
    border-radius: 12px;
    color: var(--bg-deep);
    font-family: 'Outfit', sans-serif;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s;
  }
  .login-btn:hover { filter: brightness(1.1); transform: translateY(-1px); }
  .login-btn:active { transform: translateY(0); }

  .login-error { margin-top: 16px; font-size: 13px; color: #e05555; opacity: 0; transition: opacity 0.3s; }
  .login-error.show { opacity: 1; }

  /* VOTE */
  .vote-screen { display: none; }

  .header { text-align: center; margin-bottom: 40px; animation: fadeDown 0.8s ease; }
  .header-icon { font-size: 36px; margin-bottom: 10px; display: block; }
  .greeting-banner {
    font-family: 'Playfair Display', serif;
    font-size: 16px;
    font-style: italic;
    color: var(--gold-light);
    margin-bottom: 16px;
    padding: 10px 20px;
    background: rgba(201, 168, 76, 0.06);
    border: 1px solid rgba(201, 168, 76, 0.12);
    border-radius: 10px;
    animation: fadeIn 0.8s ease 0.3s both;
  }
  .header h1 { font-family: 'Playfair Display', serif; font-size: 28px; color: var(--gold); font-weight: 700; line-height: 1.2; }
  .header p { font-size: 14px; color: var(--cream-dim); margin-top: 10px; line-height: 1.6; }
  .rule-badge {
    display: inline-block; margin-top: 14px; padding: 7px 18px;
    border: 1px solid var(--gold-dim); border-radius: 100px;
    font-size: 12px; color: var(--gold-light); font-weight: 500;
    letter-spacing: 0.8px; text-transform: uppercase;
  }

  .counter { text-align: center; margin-bottom: 24px; font-size: 14px; color: var(--cream-dim); }
  .counter .num { color: var(--gold); font-weight: 600; font-size: 20px; }
  .counter.done .num { color: #4ade80; }

  /* Cards */
  .card {
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 16px;
    padding: 22px;
    margin-bottom: 14px;
    cursor: pointer;
    transition: all 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    animation: fadeUp 0.6s ease both;
  }
  .card:nth-child(1) { animation-delay: 0.05s; }
  .card:nth-child(2) { animation-delay: 0.12s; }
  .card:nth-child(3) { animation-delay: 0.19s; }
  .card:nth-child(4) { animation-delay: 0.26s; }
  .card:nth-child(5) { animation-delay: 0.33s; }

  .card:active { transform: scale(0.98); }
  .card:hover { background: var(--bg-card-hover); border-color: var(--border-hover); }

  .card.selected {
    border-color: var(--border-selected);
    background: linear-gradient(160deg, var(--bg-card) 40%, rgba(201, 168, 76, 0.04) 100%);
    box-shadow: 0 0 50px var(--selected-glow), inset 0 1px 0 rgba(201, 168, 76, 0.08);
  }
  .card.disabled { opacity: 0.3; cursor: not-allowed; pointer-events: none; }

  .check {
    position: absolute; top: 18px; right: 18px;
    width: 26px; height: 26px; border-radius: 50%;
    border: 2px solid rgba(201, 168, 76, 0.15);
    display: flex; align-items: center; justify-content: center;
    transition: all 0.3s;
  }
  .selected .check { background: var(--gold); border-color: var(--gold); }
  .check svg { width: 13px; height: 13px; stroke: var(--bg-deep); stroke-width: 3; fill: none; opacity: 0; transition: opacity 0.2s; }
  .selected .check svg { opacity: 1; }

  .card-name { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 700; color: var(--gold-light); margin-bottom: 4px; padding-right: 40px; }
  .card-vibe { font-size: 12px; color: var(--cream-dim); text-transform: uppercase; letter-spacing: 1.5px; font-weight: 500; margin-bottom: 14px; }

  .ingredients { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 10px; }
  .ing-tag { padding: 5px 12px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.06); border-radius: 100px; font-size: 12px; color: var(--cream); }
  .surprise-tags { display: flex; gap: 6px; flex-wrap: wrap; }
  .surprise-tag { padding: 5px 12px; background: rgba(201, 168, 76, 0.06); border: 1px dashed var(--gold-dim); border-radius: 100px; font-size: 12px; color: var(--gold); cursor: pointer; transition: all 0.2s; }
  .surprise-tag:hover { background: rgba(201, 168, 76, 0.12); }
  .surprise-tag.revealed { border-style: solid; background: rgba(201, 168, 76, 0.1); cursor: default; }
  .garnish { margin-top: 12px; font-size: 12px; color: var(--cream-dim); font-style: italic; opacity: 0.7; }

  /* QUIZ MODAL */
  .modal-overlay {
    display: none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.8);
    z-index: 50;
    align-items: center;
    justify-content: center;
    padding: 20px;
    animation: fadeIn 0.3s ease;
  }
  .modal-overlay.show { display: flex; }

  .modal {
    background: var(--bg-card);
    border: 1px solid var(--border-hover);
    border-radius: 16px;
    padding: 28px;
    max-width: 380px;
    width: 100%;
    text-align: center;
    animation: fadeUp 0.3s ease;
  }
  .modal h3 {
    font-family: 'Playfair Display', serif;
    font-size: 18px;
    color: var(--gold);
    margin-bottom: 8px;
  }
  .modal .quiz-q {
    font-size: 15px;
    color: var(--cream);
    line-height: 1.5;
    margin-bottom: 20px;
  }
  .modal .quiz-input {
    width: 100%;
    padding: 14px 16px;
    background: var(--bg-deep);
    border: 1px solid var(--border-subtle);
    border-radius: 10px;
    color: var(--cream);
    font-family: 'Outfit', sans-serif;
    font-size: 16px;
    text-align: center;
    outline: none;
    margin-bottom: 12px;
    transition: border-color 0.3s;
  }
  .modal .quiz-input:focus { border-color: var(--gold-dim); }
  .modal .quiz-submit {
    width: 100%;
    padding: 14px;
    background: linear-gradient(135deg, var(--gold-dim), var(--gold));
    border: none;
    border-radius: 10px;
    color: var(--bg-deep);
    font-family: 'Outfit', sans-serif;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .modal .quiz-submit:hover { filter: brightness(1.1); }
  .modal .quiz-result {
    margin-top: 16px;
    font-size: 14px;
    line-height: 1.5;
    display: none;
  }
  .modal .quiz-result.wrong { color: #e05555; display: block; }
  .modal .quiz-result.busted { color: var(--gold); display: block; }
  .modal .modal-close {
    margin-top: 16px;
    padding: 10px 24px;
    background: none;
    border: 1px solid var(--border-subtle);
    border-radius: 8px;
    color: var(--cream-dim);
    font-family: 'Outfit', sans-serif;
    font-size: 13px;
    cursor: pointer;
  }

  .submit-wrap { margin-top: 32px; animation: fadeUp 0.6s ease 0.5s both; }
  .submit-btn {
    width: 100%; padding: 18px;
    background: linear-gradient(135deg, var(--gold-dim) 0%, var(--gold) 100%);
    border: none; border-radius: 14px;
    color: var(--bg-deep); font-family: 'Outfit', sans-serif;
    font-size: 16px; font-weight: 600; letter-spacing: 0.5px;
    cursor: pointer; transition: all 0.3s;
    opacity: 0.3; pointer-events: none;
  }
  .submit-btn.active { opacity: 1; pointer-events: auto; }
  .submit-btn.active:hover { filter: brightness(1.1); transform: translateY(-2px); box-shadow: 0 8px 30px rgba(201, 168, 76, 0.25); }
  .submit-btn.active:active { transform: translateY(0); }
  .submit-btn.sending { opacity: 0.6; pointer-events: none; }

  /* SUCCESS */
  .success-screen { display: none; min-height: 100vh; align-items: center; justify-content: center; text-align: center; padding: 20px; }
  .success-screen .icon { font-size: 64px; margin-bottom: 20px; display: block; animation: popIn 0.5s ease; }
  .success-screen h1 { font-family: 'Playfair Display', serif; font-size: 28px; color: var(--gold); margin-bottom: 12px; }
  .success-screen p { font-size: 15px; color: var(--cream-dim); line-height: 1.6; }
  .chosen-list { margin-top: 24px; text-align: left; max-width: 300px; margin-left: auto; margin-right: auto; }
  .chosen-item { padding: 12px 16px; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: 10px; margin-bottom: 8px; font-family: 'Playfair Display', serif; font-size: 18px; color: var(--gold-light); }

  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes fadeDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 50% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
  @keyframes shake { 0%,100% { transform: translateX(0); } 20% { transform: translateX(-8px); } 40% { transform: translateX(8px); } 60% { transform: translateX(-6px); } 80% { transform: translateX(6px); } }
  .shake { animation: shake 0.4s ease; }
</style>
</head>
<body>

<div class="ambient amb-1"></div>
<div class="ambient amb-2"></div>

<!-- LOGIN -->
<div class="login-screen" id="loginScreen">
  <div class="login-box">
    <span class="login-icon">ü•É</span>
    <h1>Kokteyl Gecesi</h1>
    <p class="subtitle">Sana √∂zel ≈üifreni gir, oylamaya katƒ±l</p>
    <input type="text" class="password-input" id="passInput" placeholder="≈ûifre" autocomplete="off" autocapitalize="characters" spellcheck="false">
    <button class="login-btn" onclick="handleLogin()">Gƒ∞Rƒ∞≈û YAP</button>
    <p class="login-error" id="loginError"></p>
  </div>
</div>

<!-- VOTE -->
<div class="vote-screen" id="voteScreen">
  <div class="page">
    <div class="header">
      <span class="header-icon">üç∏</span>
      <div class="greeting-banner" id="greetingText"></div>
      <h1>Viski Gecesi Men√ºs√º</h1>
      <p>Bu sefer viski bazlƒ± 5 kokteyl hazƒ±rladƒ±m.<br>En beƒüendiƒüin 3 tanesini se√ß!</p>
      <span class="rule-badge">üîí Her kokteylde 2 s√ºrpriz malzeme var</span>
    </div>
    <div class="counter" id="counter"><span class="num" id="countNum">0</span> / 3 se√ßildi</div>
    <div id="cardList"></div>
    <div class="submit-wrap">
      <button class="submit-btn" id="submitBtn" onclick="handleSubmit()">OYUMU G√ñNDER</button>
    </div>
  </div>
</div>

<!-- SUCCESS -->
<div class="success-screen" id="successScreen">
  <div>
    <span class="icon">üéâ</span>
    <h1>Oyun Kaydedildi!</h1>
    <p>Te≈üekk√ºrler, se√ßimlerin iletildi.<br>Kokteyl gecesinde g√∂r√º≈ü√ºr√ºz!</p>
    <div class="chosen-list" id="chosenList"></div>
  </div>
</div>

<!-- QUIZ MODAL -->
<div class="modal-overlay" id="quizModal">
  <div class="modal">
    <h3>üîí S√ºrpriz Kilidi</h3>
    <p class="quiz-q" id="quizQuestion"></p>
    <input type="text" class="quiz-input" id="quizInput" placeholder="Cevabƒ±nƒ± yaz..." autocomplete="off">
    <button class="quiz-submit" onclick="checkQuiz()">CEVAPLA</button>
    <div class="quiz-result" id="quizResult"></div>
    <button class="modal-close" onclick="closeQuiz()">Kapat</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚öôÔ∏è EMAILJS AYARLARI
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// 1. https://www.emailjs.com ‚Üí √ºcretsiz hesap a√ß
// 2. Email Services ‚Üí Add New Service ‚Üí Gmail baƒüla
// 3. Email Templates ‚Üí Create New Template:
//      Subject: üç∏ Kokteyl Oyu: {{voter}}
//      Body:
//        Oy veren: {{voter}}
//        Se√ßimler: {{choices}}
//        Zaman: {{time}}
// 4. A≈üaƒüƒ±daki 3 deƒüeri doldur:

const EMAILJS_PUBLIC_KEY  = 'DDJeUgA08efhrrIPp';
const EMAILJS_SERVICE_ID  = 'service_vkb7jry';
const EMAILJS_TEMPLATE_ID = 'template_cohm3z2';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üîê ≈ûƒ∞FRE Sƒ∞STEMƒ∞
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const PASSWORDS = {
  'ARAP':     { name: 'Uygur',   greeting: 'Ho≈ü geldin Uygur Bey, buyur i√ßeri üé©', admin: false },
  'TAPULU':   { name: 'Ufuk',    greeting: 'Ho≈ü geldin Ufuk Bey, seni bekliyorduk ü•Ç', admin: false },
  'MDMA':     { name: 'A.H.T.T', greeting: 'Ho≈ü geldin A.H.T.T, bar sana a√ßƒ±k üç∏', admin: false },
  'MGAVM':    { name: 'MTK',     greeting: 'Ho≈ü geldin MTK, gecenin yƒ±ldƒ±zƒ± sensin ‚ú®', admin: false },
  'NAMUSSUZ': { name: 'Patron',  greeting: 'Ho≈ü geldin Patron, sistem senin emrinde üîß', admin: true }
};

function getUsed() {
  try { return JSON.parse(localStorage.getItem('kg_used') || '[]'); }
  catch { return []; }
}
function setUsed(p) {
  const u = getUsed();
  if (!u.includes(p)) { u.push(p); localStorage.setItem('kg_used', JSON.stringify(u)); }
}

let currentVoter = '';
let currentPass = '';
let isAdmin = false;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üç∏ KOKTEYLler
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const cocktails = [
  {
    id: 'haysiyetsiz', name: 'Haysiyetsiz',
    vibe: 'Dumanlƒ± ¬∑ Tatlƒ± ¬∑ Otsu',
    visible: ['K√∂zlenmi≈ü pƒ±rasa', 'Bal', 'Limon', 'Soda'],
    surprise: ['üîí S√ºrpriz #1', 'üîí S√ºrpriz #2'],
    secrets: ['Armut', 'Ada√ßayƒ±'],
    garnish: 'K√∂zlenmi≈ü pƒ±rasa halkasƒ± & armut dilimi ile servis edilir',
    questions: [
      { q: 'Fermat\'ƒ±n Son Teoremi hangi yƒ±l kanƒ±tlandƒ±?', a: '1995', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' },
      { q: '1 + 1 ka√ßtƒ±r? (ƒ∞kili sayƒ± sisteminde)', a: '10', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' }
    ]
  },
  {
    id: 'edepsiz', name: 'Edepsiz',
    vibe: 'Baharatlƒ± ¬∑ Ek≈üi ¬∑ Cesur',
    visible: ['K√∂zlenmi≈ü kƒ±rmƒ±zƒ± biber', 'Bal', 'Limon', 'Soda'],
    surprise: ['üîí S√ºrpriz #1', 'üîí S√ºrpriz #2'],
    secrets: ['Zencefil', 'Nar'],
    garnish: 'Biber dilimi & limon kabuƒüu ile servis edilir',
    questions: [
      { q: 'Poincar√© Varsayƒ±mƒ±\'nƒ± kanƒ±tlayan matematik√ßi kimdir?', a: 'perelman', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' },
      { q: 'Euler sayƒ±sƒ± (e) virg√ºlden sonra ilk 4 rakam nedir?', a: '7182', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' }
    ]
  },
  {
    id: 'yuzsuz', name: 'Y√ºzs√ºz',
    vibe: 'Kremamsƒ± ¬∑ Sƒ±cak ¬∑ Yoƒüun',
    visible: ['Tahin', 'Bal', 'Limon'],
    surprise: ['üîí S√ºrpriz #1', 'üîí S√ºrpriz #2'],
    secrets: ['Muz', 'Tar√ßƒ±n'],
    garnish: 'Tahin √ßizgisi & bal damlasƒ± ile servis edilir',
    questions: [
      { q: 'D√∂rt renk teoremi ilk bilgisayarla kanƒ±tlanan teorem mi? (Evet/Hayƒ±r)', a: 'evet', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' },
      { q: 'Pi sayƒ±sƒ±nƒ±n virg√ºlden sonra ilk 5 rakamƒ± nedir?', a: '14159', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' }
    ]
  },
  {
    id: 'arsiz', name: 'Arsƒ±z',
    vibe: 'Toprak ¬∑ Ek≈üi ¬∑ Dumanlƒ±',
    visible: ['Pancar', 'Portakal', 'Limon', 'Soda'],
    surprise: ['üîí S√ºrpriz #1', 'üîí S√ºrpriz #2'],
    secrets: ['Yakƒ±lmƒ±≈ü biberiye', 'Ak√ßaaƒüa√ß ≈üurubu'],
    garnish: 'Portakal dilimi & pancar ≈üeridi ile servis edilir',
    questions: [
      { q: 'Kepler Varsayƒ±mƒ± neyin en verimli dizilimini kanƒ±tlar?', a: 'k√ºre', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' },
      { q: 'Sonsuz sayƒ±da asal sayƒ± olduƒüunu ilk kanƒ±tlayan kimdir?', a: '√∂klid', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' }
    ]
  },
  {
    id: 'terbiyesiz', name: 'Terbiyesiz',
    vibe: 'Kremamsƒ± ¬∑ Taze ¬∑ Meyveli',
    visible: ['Avokado', 'B√∂ƒü√ºrtlen', 'Limon', 'Soda'],
    surprise: ['üîí S√ºrpriz #1', 'üîí S√ºrpriz #2'],
    secrets: ['Nane', 'Bal'],
    garnish: 'B√∂ƒü√ºrtlen & limon kabuƒüu ile servis edilir',
    questions: [
      { q: 'Goldbach Varsayƒ±mƒ±\'na g√∂re her √ßift sayƒ± neyin toplamƒ±dƒ±r?', a: 'asal', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' },
      { q: 'Karek√∂k 2 irrasyonel midir? (Evet/Hayƒ±r)', a: 'evet', fake: 'Bravo, cidden √ßok iyi yapay zeka kullanƒ±yorsun. S√ºrpriz dediysek s√ºrpriz ü§ñ' }
    ]
  }
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LOGIN
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const passInput = document.getElementById('passInput');
passInput.addEventListener('keydown', e => { if (e.key === 'Enter') handleLogin(); });

function handleLogin() {
  const val = passInput.value.trim().toUpperCase();
  const err = document.getElementById('loginError');

  if (!PASSWORDS[val]) {
    err.textContent = 'Ge√ßersiz ≈üifre';
    err.classList.add('show');
    passInput.classList.add('shake');
    setTimeout(() => passInput.classList.remove('shake'), 400);
    return;
  }

  const pw = PASSWORDS[val];

  if (!pw.admin && getUsed().includes(val)) {
    err.textContent = 'Bu ≈üifre zaten kullanƒ±ldƒ±. √áakallƒ±k mƒ± yapƒ±yorsun? üßê';
    err.classList.add('show');
    passInput.classList.add('shake');
    setTimeout(() => passInput.classList.remove('shake'), 400);
    return;
  }

  currentVoter = pw.name;
  currentPass = val;
  isAdmin = pw.admin;
  document.getElementById('loginScreen').style.display = 'none';
  document.getElementById('voteScreen').style.display = 'block';
  document.getElementById('greetingText').textContent = pw.greeting;
  renderCards();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CARDS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let selected = new Set();
const MAX = 3;

function renderCards() {
  document.getElementById('cardList').innerHTML = cocktails.map(c => `
    <div class="card" id="card-${c.id}" onclick="toggle('${c.id}')">
      <div class="check"><svg viewBox="0 0 24 24"><polyline points="4 12 10 18 20 6"/></svg></div>
      <div class="card-name">${c.name}</div>
      <div class="card-vibe">${c.vibe}</div>
      <div class="ingredients">${c.visible.map(v => `<span class="ing-tag">${v}</span>`).join('')}</div>
      <div class="surprise-tags">
        <span class="surprise-tag" id="s-${c.id}-0" onclick="event.stopPropagation(); openQuiz('${c.id}', 0)">üîí S√ºrpriz #1</span>
        <span class="surprise-tag" id="s-${c.id}-1" onclick="event.stopPropagation(); openQuiz('${c.id}', 1)">üîí S√ºrpriz #2</span>
      </div>
      <div class="garnish">${c.garnish}</div>
    </div>
  `).join('');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// üßÆ MATEMATƒ∞K QUIZ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let currentQuizCocktail = null;
let currentQuizIndex = null;

function openQuiz(cocktailId, surpriseIndex) {
  const tag = document.getElementById(`s-${cocktailId}-${surpriseIndex}`);
  if (tag.classList.contains('revealed')) return;

  const c = cocktails.find(x => x.id === cocktailId);
  currentQuizCocktail = cocktailId;
  currentQuizIndex = surpriseIndex;

  document.getElementById('quizQuestion').textContent = c.questions[surpriseIndex].q;
  document.getElementById('quizInput').value = '';
  document.getElementById('quizResult').className = 'quiz-result';
  document.getElementById('quizResult').textContent = '';
  document.getElementById('quizModal').classList.add('show');
  setTimeout(() => document.getElementById('quizInput').focus(), 100);
}

function checkQuiz() {
  const c = cocktails.find(x => x.id === currentQuizCocktail);
  const q = c.questions[currentQuizIndex];
  const answer = document.getElementById('quizInput').value.trim().toLowerCase();
  const result = document.getElementById('quizResult');

  if (!answer) return;

  if (answer.includes(q.a.toLowerCase())) {
    // Doƒüru cevap = yapay zeka kullanƒ±yor!
    result.textContent = q.fake;
    result.className = 'quiz-result busted';
  } else {
    result.textContent = 'Yanlƒ±≈ü cevap! S√ºrpriz malzeme gizli kalƒ±yor ü§∑';
    result.className = 'quiz-result wrong';
  }
}

function closeQuiz() {
  document.getElementById('quizModal').classList.remove('show');
  currentQuizCocktail = null;
  currentQuizIndex = null;
}

// Quiz input'ta Enter ile cevaplama
document.getElementById('quizInput').addEventListener('keydown', e => { if (e.key === 'Enter') checkQuiz(); });

function toggle(id) {
  if (selected.has(id)) selected.delete(id);
  else if (selected.size < MAX) selected.add(id);
  updateUI();
}

function updateUI() {
  const n = selected.size;
  document.getElementById('countNum').textContent = n;
  document.getElementById('counter').classList.toggle('done', n === MAX);
  cocktails.forEach(c => {
    const el = document.getElementById(`card-${c.id}`);
    const s = selected.has(c.id);
    el.classList.toggle('selected', s);
    el.classList.toggle('disabled', !s && n >= MAX);
  });
  document.getElementById('submitBtn').classList.toggle('active', n === MAX);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SUBMIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function handleSubmit() {
  if (selected.size !== MAX) return;
  const btn = document.getElementById('submitBtn');
  btn.textContent = 'G√ñNDERƒ∞Lƒ∞YOR...';
  btn.classList.add('sending');

  const choices = [...selected].map(id => cocktails.find(c => c.id === id).name);
  const now = new Date().toLocaleString('tr-TR');

  try {
    if (EMAILJS_PUBLIC_KEY !== 'BURAYA_PUBLIC_KEY') {
      emailjs.init(EMAILJS_PUBLIC_KEY);
      await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, {
        voter: currentVoter,
        choices: choices.join(', '),
        time: now
      });
    }
  } catch (e) {
    console.error('EmailJS error:', e);
  }

  if (!isAdmin) setUsed(currentPass);
  showSuccess(choices);
}

function showSuccess(choices) {
  document.getElementById('voteScreen').style.display = 'none';
  const ss = document.getElementById('successScreen');
  ss.style.display = 'flex';
  document.getElementById('chosenList').innerHTML = choices.map(n => `<div class="chosen-item">üç∏ ${n}</div>`).join('');
}
</script>
</body>
</html>
